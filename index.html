<!DOCTYPE html>
<html lang="zh-TW"><head>
    <meta charset="UTF-8">
    <title>[07:22:09] å¡åµé”, ä¸å¯æ®º</title>
    <style id="base-style">
        :root { 
            --bg: #121418; --card: #1e222a; --header: #2d323e; --text: #e0e0e0; 
            --accent: #ffcc00; --grid-line: #cccccc; --next: #00ffcc; --guild: #e74c3c;
        }
        body { font-family: "Microsoft JhengHei", sans-serif; background: var(--bg); color: var(--text); padding: 20px; display: flex; flex-direction: column; align-items: center; }
        
        .brand-container { text-align: center; margin-bottom: 15px; }
        .guild-brand { font-size: 2.2em; font-weight: bold; color: var(--accent); text-shadow: 2px 2px 4px rgba(0,0,0,0.5); letter-spacing: 3px; margin: 0; }
        .guild-brand span { color: #fff; font-size: 0.5em; border: 1px solid var(--accent); padding: 2px 8px; border-radius: 4px; vertical-align: middle; margin-left: 10px; letter-spacing: 1px; }
        .author-tag { color: #888; font-size: 0.9em; margin-top: 5px; font-style: italic; letter-spacing: 1px; }
        .author-tag strong { color: var(--next); font-style: normal; }

        #top-bar { text-align: center; background: var(--card); padding: 20px; border-radius: 12px; margin-bottom: 15px; border: 2px solid var(--grid-line); width: 100%; max-width: 600px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
        #clock { font-size: 2.8em; color: var(--accent); font-weight: bold; font-family: monospace; }
        #next-boss-info { font-size: 1.2em; color: var(--next); background: rgba(0,255,204,0.1); padding: 10px; border-radius: 6px; border: 1px solid var(--next); font-weight: bold; margin-top: 10px; min-height: 1.5em; }
        
        .guild-boss-area { background: #2c2222; border: 2px solid var(--guild); padding: 15px; border-radius: 10px; margin-bottom: 15px; width: 100%; max-width: 600px; text-align: center; }
        .guild-title { color: var(--guild); font-weight: bold; font-size: 1.1em; margin-bottom: 10px; display: block; }
        
        .voice-controls { margin-bottom: 15px; background: #333; padding: 15px 20px; border-radius: 8px; display: flex; flex-direction: column; align-items: center; gap: 10px; border: 1px solid var(--accent); width: 100%; max-width: 600px; }
        .voice-row { display: flex; align-items: center; gap: 15px; flex-wrap: wrap; justify-content: center; }
        
        select { background: #444; color: white; border: 1px solid var(--accent); padding: 5px; border-radius: 4px; cursor: pointer; }

        .toolbar { margin-bottom: 15px; display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; }
        button { cursor: pointer; padding: 8px 15px; border-radius: 4px; border: 1px solid var(--grid-line); background: var(--header); color: white; font-weight: bold; transition: 0.2s; }
        button:hover { opacity: 0.8; }
        
        .export-btn { background: #27ae60; border-color: #2ecc71; }
        .readonly-btn { background: #2980b9; border-color: #3498db; }
        .test-btn { background: #8e44ad; border-color: #9b59b6; }
        .guild-btn { background: var(--guild); border-color: #c0392b; }

        table { border-collapse: collapse; width: 100%; max-width: 1200px; background: var(--card); border: 2px solid var(--grid-line); table-layout: fixed; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        th, td { border: 2px solid var(--grid-line) !important; padding: 10px 5px; text-align: center; min-height: 90px; }
        th { background: #333945; color: #fff; }
        .time-col { background: var(--header); width: 75px; font-weight: bold; color: var(--accent); border-right: 3px solid var(--accent) !important; }
        .boss-item { background: rgba(0,0,0,0.5); margin: 4px 2px; padding: 8px; border-radius: 4px; font-size: 0.9em; cursor: pointer; border-left: 4px solid var(--accent); }
        .add-btn { width: 90%; border: 1px dashed #888; background: none; color: #999; font-size: 11px; margin-top: 8px; cursor: pointer; }
        .active-cell { background: rgba(0, 255, 204, 0.2) !important; box-shadow: inset 0 0 15px var(--next); border: 2px solid var(--next) !important; }
        
        .footer { margin-top: 30px; padding: 20px; color: #666; font-size: 0.85em; text-align: center; border-top: 1px solid #333; width: 100%; max-width: 800px; line-height: 1.6; }
    </style>
<style>.add-btn, #admin-tools, #guild-admin-btns { display: none !important; } .boss-item { cursor: default !important; pointer-events: none !important; }</style></head>
<body>

<div class="brand-container">
    <h1 class="guild-brand">é…’ç™® <span>å…¬æœƒå°ˆç”¨</span></h1>
    <div class="author-tag">Designed by <strong>Elfin</strong></div>
</div>

<div id="top-bar">
    <div id="date-display">2026å¹´2æœˆ20æ—¥ æ˜ŸæœŸäº”</div>
    <div id="clock">03:37:50</div>
    <div id="next-boss-info">ä¸‹ä¸€å ´é å‘Šï¼šå¡åµé”, ä¸å¯æ®º (07:22:09)</div>
</div>

<div class="guild-boss-area">
    <span class="guild-title">âš”ï¸ é…’ç™®æœ¬é€±å…¬æœƒç‹æ’ç¨‹</span>
    <div id="guild-status" style="font-size:1.1em; color:#fff; margin-bottom:10px;">é€±å…­ 21:00</div>
    <div id="guild-admin-btns">
        <button class="guild-btn" onclick="setGuildBoss()">ğŸ“… è¨­å®šå…¬æœƒç‹</button>
        <button style="background:#555;" onclick="clearGuildBoss()">âŒ æ¸…é™¤</button>
    </div>
</div>

<div class="voice-controls">
    <div class="voice-row">
        <button id="voiceToggleBtn" class="voice-btn" onclick="toggleVoice()" style="background: rgb(39, 174, 96);">ğŸ”Š èªéŸ³ï¼šé–‹å•Ÿ</button>
        <button class="test-btn" onclick="testCurrentVoice()">ğŸ“¢ æ¸¬è©¦æ’­å ±</button>
    </div>
    <div class="voice-row">
        <span style="font-size:0.9em; color:var(--accent);">èªè¨€ï¼š</span>
        <select id="voiceLangSelect" onchange="saveVoiceLang()">
            <option value="zh-TW">ä¸­æ–‡ (ç¹é«”)</option>
            <option value="en-US">English (US)</option>
            <option value="ja-JP">æ—¥æœ¬èª (JP)</option>
            <option value="ko-KR">í•œêµ­ì–´ (KR)</option>
        </select>
        <span style="font-size:0.9em; color:var(--accent); margin-left:10px;">éŸ³é‡ï¼š</span>
        <input type="range" id="volumeRange" min="0" max="1" step="0.1" value="0.5" onchange="saveVolume()">
    </div>
</div>

<div class="toolbar" id="admin-tools">
    <button class="export-btn" onclick="exportHTML(false)">ğŸ’¾ å„²å­˜ç®¡ç†å“¡ç‰ˆ (Elfin å°ˆç”¨)</button>
    <button class="readonly-btn" onclick="exportHTML(true)">ğŸŒ è¼¸å‡ºå…¬æœƒç¶²é ç‰ˆ (åˆ†äº«ç”¨)</button>
</div>

<table id="bossTable">
    <thead>
        <tr><th class="time-col">æ™‚é–“</th><th>é€±ä¸€</th><th>é€±äºŒ</th><th>é€±ä¸‰</th><th>é€±å››</th><th>é€±äº”</th><th>é€±å…­</th><th>é€±æ—¥</th></tr>
    </thead>
    <tbody id="tableBody"><tr><td class="time-col">00:15</td><td id="00:15-é€±ä¸€"><button class="add-btn" onclick="addItem('00:15-é€±ä¸€')">+ æ–°å¢</button></td><td id="00:15-é€±äºŒ"><button class="add-btn" onclick="addItem('00:15-é€±äºŒ')">+ æ–°å¢</button></td><td id="00:15-é€±ä¸‰"><button class="add-btn" onclick="addItem('00:15-é€±ä¸‰')">+ æ–°å¢</button></td><td id="00:15-é€±å››"><button class="add-btn" onclick="addItem('00:15-é€±å››')">+ æ–°å¢</button></td><td id="00:15-é€±äº”"><button class="add-btn" onclick="addItem('00:15-é€±äº”')">+ æ–°å¢</button></td><td id="00:15-é€±å…­"><div class="boss-item" onclick="removeItem('00:15-é€±å…­', 0)"><strong>è‚¯æ©ç‰¹/æœ¨æ‹‰å¡</strong></div><button class="add-btn" onclick="addItem('00:15-é€±å…­')">+ æ–°å¢</button></td><td id="00:15-é€±æ—¥"><div class="boss-item" onclick="removeItem('00:15-é€±æ—¥', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('00:15-é€±æ—¥')">+ æ–°å¢</button></td></tr><tr><td class="time-col">02:00</td><td id="02:00-é€±ä¸€"><div class="boss-item" onclick="removeItem('02:00-é€±ä¸€', 0)"><strong>å…‹åƒ¹å¡</strong></div><div class="boss-item" onclick="removeItem('02:00-é€±ä¸€', 1)"><strong>ä¸å¯æ®º</strong></div><button class="add-btn" onclick="addItem('02:00-é€±ä¸€')">+ æ–°å¢</button></td><td id="02:00-é€±äºŒ"><div class="boss-item" onclick="removeItem('02:00-é€±äºŒ', 0)"><strong>ç¾…è£´å‹’</strong></div><div class="boss-item" onclick="removeItem('02:00-é€±äºŒ', 1)"><strong>çƒåœ–é‡Œ</strong></div><button class="add-btn" onclick="addItem('02:00-é€±äºŒ')">+ æ–°å¢</button></td><td id="02:00-é€±ä¸‰"><div class="boss-item" onclick="removeItem('02:00-é€±ä¸‰', 0)"><strong>å¥§å¹³</strong></div><div class="boss-item" onclick="removeItem('02:00-é€±ä¸‰', 1)"><strong>é‡‘è±¬ç‹</strong></div><button class="add-btn" onclick="addItem('02:00-é€±ä¸‰')">+ æ–°å¢</button></td><td id="02:00-é€±å››"><div class="boss-item" onclick="removeItem('02:00-é€±å››', 0)"><strong>å¡åµé”</strong></div><div class="boss-item" onclick="removeItem('02:00-é€±å››', 1)"><strong>é‡‘è±¬ç‹</strong></div><button class="add-btn" onclick="addItem('02:00-é€±å››')">+ æ–°å¢</button></td><td id="02:00-é€±äº”"><div class="boss-item" onclick="removeItem('02:00-é€±äº”', 0)"><strong>åº«å±¯</strong></div><div class="boss-item" onclick="removeItem('02:00-é€±äº”', 1)"><strong>å±±å›</strong></div><button class="add-btn" onclick="addItem('02:00-é€±äº”')">+ æ–°å¢</button></td><td id="02:00-é€±å…­"><div class="boss-item" onclick="removeItem('02:00-é€±å…­', 0)"><strong>åº«å±¯</strong></div><div class="boss-item" onclick="removeItem('02:00-é€±å…­', 1)"><strong>ä¸å¯æ®º</strong></div><button class="add-btn" onclick="addItem('02:00-é€±å…­')">+ æ–°å¢</button></td><td id="02:00-é€±æ—¥"><div class="boss-item" onclick="removeItem('02:00-é€±æ—¥', 0)"><strong>ç¾…è£´å‹’</strong></div><div class="boss-item" onclick="removeItem('02:00-é€±æ—¥', 1)"><strong>å±±å›</strong></div><button class="add-btn" onclick="addItem('02:00-é€±æ—¥')">+ æ–°å¢</button></td></tr><tr><td class="time-col">11:00</td><td id="11:00-é€±ä¸€"><div class="boss-item" onclick="removeItem('11:00-é€±ä¸€', 0)"><strong>ç¾…è£´å‹’</strong></div><div class="boss-item" onclick="removeItem('11:00-é€±ä¸€', 1)"><strong>çƒåœ–é‡Œ</strong></div><button class="add-btn" onclick="addItem('11:00-é€±ä¸€')">+ æ–°å¢</button></td><td id="11:00-é€±äºŒ"><div class="boss-item" onclick="removeItem('11:00-é€±äºŒ', 0)"><strong>åº«å±¯</strong></div><div class="boss-item" onclick="removeItem('11:00-é€±äºŒ', 1)"><strong>é‡‘è±¬ç‹</strong></div><button class="add-btn" onclick="addItem('11:00-é€±äºŒ')">+ æ–°å¢</button></td><td id="11:00-é€±ä¸‰"><div class="boss-item" onclick="removeItem('11:00-é€±ä¸‰', 0)"><strong>å…‹åƒ¹å¡</strong></div><div class="boss-item" onclick="removeItem('11:00-é€±ä¸‰', 1)"><strong>å±±å›</strong></div><button class="add-btn" onclick="addItem('11:00-é€±ä¸‰')">+ æ–°å¢</button></td><td id="11:00-é€±å››"><button class="add-btn" onclick="addItem('11:00-é€±å››')">+ æ–°å¢</button></td><td id="11:00-é€±äº”" class="active-cell"><div class="boss-item" onclick="removeItem('11:00-é€±äº”', 0)"><strong>å¡åµé”</strong></div><div class="boss-item" onclick="removeItem('11:00-é€±äº”', 1)"><strong>ä¸å¯æ®º</strong></div><button class="add-btn" onclick="addItem('11:00-é€±äº”')">+ æ–°å¢</button></td><td id="11:00-é€±å…­"><div class="boss-item" onclick="removeItem('11:00-é€±å…­', 0)"><strong>å¡åµé”</strong></div><div class="boss-item" onclick="removeItem('11:00-é€±å…­', 1)"><strong>çƒåœ–é‡Œ</strong></div><button class="add-btn" onclick="addItem('11:00-é€±å…­')">+ æ–°å¢</button></td><td id="11:00-é€±æ—¥"><div class="boss-item" onclick="removeItem('11:00-é€±æ—¥', 0)"><strong>åº«å±¯</strong></div><div class="boss-item" onclick="removeItem('11:00-é€±æ—¥', 1)"><strong>ä¸å¯æ®º</strong></div><button class="add-btn" onclick="addItem('11:00-é€±æ—¥')">+ æ–°å¢</button></td></tr><tr><td class="time-col">14:00</td><td id="14:00-é€±ä¸€"><div class="boss-item" onclick="removeItem('14:00-é€±ä¸€', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('14:00-é€±ä¸€')">+ æ–°å¢</button></td><td id="14:00-é€±äºŒ"><div class="boss-item" onclick="removeItem('14:00-é€±äºŒ', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('14:00-é€±äºŒ')">+ æ–°å¢</button></td><td id="14:00-é€±ä¸‰"><div class="boss-item" onclick="removeItem('14:00-é€±ä¸‰', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('14:00-é€±ä¸‰')">+ æ–°å¢</button></td><td id="14:00-é€±å››"><div class="boss-item" onclick="removeItem('14:00-é€±å››', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('14:00-é€±å››')">+ æ–°å¢</button></td><td id="14:00-é€±äº”"><div class="boss-item" onclick="removeItem('14:00-é€±äº”', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('14:00-é€±äº”')">+ æ–°å¢</button></td><td id="14:00-é€±å…­"><div class="boss-item" onclick="removeItem('14:00-é€±å…­', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('14:00-é€±å…­')">+ æ–°å¢</button></td><td id="14:00-é€±æ—¥"><div class="boss-item" onclick="removeItem('14:00-é€±æ—¥', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('14:00-é€±æ—¥')">+ æ–°å¢</button></td></tr><tr><td class="time-col">15:00</td><td id="15:00-é€±ä¸€"><div class="boss-item" onclick="removeItem('15:00-é€±ä¸€', 0)"><strong>å¥§å¹³</strong></div><div class="boss-item" onclick="removeItem('15:00-é€±ä¸€', 1)"><strong>é‡‘è±¬ç‹</strong></div><button class="add-btn" onclick="addItem('15:00-é€±ä¸€')">+ æ–°å¢</button></td><td id="15:00-é€±äºŒ"><div class="boss-item" onclick="removeItem('15:00-é€±äºŒ', 0)"><strong>ç¾…è£´å‹’</strong></div><div class="boss-item" onclick="removeItem('15:00-é€±äºŒ', 1)"><strong>å±±å›</strong></div><button class="add-btn" onclick="addItem('15:00-é€±äºŒ')">+ æ–°å¢</button></td><td id="15:00-é€±ä¸‰"><div class="boss-item" onclick="removeItem('15:00-é€±ä¸‰', 0)"><strong>å¡åµé”</strong></div><div class="boss-item" onclick="removeItem('15:00-é€±ä¸‰', 1)"><strong>å±±å›</strong></div><button class="add-btn" onclick="addItem('15:00-é€±ä¸‰')">+ æ–°å¢</button></td><td id="15:00-é€±å››"><div class="boss-item" onclick="removeItem('15:00-é€±å››', 0)"><strong>ç¾…è£´å‹’</strong></div><div class="boss-item" onclick="removeItem('15:00-é€±å››', 1)"><strong>ä¸å¯æ®º</strong></div><button class="add-btn" onclick="addItem('15:00-é€±å››')">+ æ–°å¢</button></td><td id="15:00-é€±äº”"><div class="boss-item" onclick="removeItem('15:00-é€±äº”', 0)"><strong>å…‹åƒ¹å¡</strong></div><div class="boss-item" onclick="removeItem('15:00-é€±äº”', 1)"><strong>çƒåœ–é‡Œ</strong></div><button class="add-btn" onclick="addItem('15:00-é€±äº”')">+ æ–°å¢</button></td><td id="15:00-é€±å…­"><div class="boss-item" onclick="removeItem('15:00-é€±å…­', 0)"><strong>å…‹åƒ¹å¡</strong></div><div class="boss-item" onclick="removeItem('15:00-é€±å…­', 1)"><strong>é‡‘è±¬ç‹</strong></div><button class="add-btn" onclick="addItem('15:00-é€±å…­')">+ æ–°å¢</button></td><td id="15:00-é€±æ—¥"><div class="boss-item" onclick="removeItem('15:00-é€±æ—¥', 0)"><strong>å¡åµé”</strong></div><div class="boss-item" onclick="removeItem('15:00-é€±æ—¥', 1)"><strong>çƒåœ–é‡Œ</strong></div><button class="add-btn" onclick="addItem('15:00-é€±æ—¥')">+ æ–°å¢</button></td></tr><tr><td class="time-col">16:00</td><td id="16:00-é€±ä¸€"><button class="add-btn" onclick="addItem('16:00-é€±ä¸€')">+ æ–°å¢</button></td><td id="16:00-é€±äºŒ"><button class="add-btn" onclick="addItem('16:00-é€±äºŒ')">+ æ–°å¢</button></td><td id="16:00-é€±ä¸‰"><button class="add-btn" onclick="addItem('16:00-é€±ä¸‰')">+ æ–°å¢</button></td><td id="16:00-é€±å››"><button class="add-btn" onclick="addItem('16:00-é€±å››')">+ æ–°å¢</button></td><td id="16:00-é€±äº”"><button class="add-btn" onclick="addItem('16:00-é€±äº”')">+ æ–°å¢</button></td><td id="16:00-é€±å…­"><div class="boss-item" onclick="removeItem('16:00-é€±å…­', 0)"><strong>é»‘æš—å½±å­</strong></div><button class="add-btn" onclick="addItem('16:00-é€±å…­')">+ æ–°å¢</button></td><td id="16:00-é€±æ—¥"><div class="boss-item" onclick="removeItem('16:00-é€±æ—¥', 0)"><strong>è²çˆ¾</strong></div><button class="add-btn" onclick="addItem('16:00-é€±æ—¥')">+ æ–°å¢</button></td></tr><tr><td class="time-col">19:00</td><td id="19:00-é€±ä¸€"><div class="boss-item" onclick="removeItem('19:00-é€±ä¸€', 0)"><strong>è‚¯æ©ç‰¹/æœ¨æ‹‰å¡</strong></div><button class="add-btn" onclick="addItem('19:00-é€±ä¸€')">+ æ–°å¢</button></td><td id="19:00-é€±äºŒ"><div class="boss-item" onclick="removeItem('19:00-é€±äºŒ', 0)"><strong>è²çˆ¾</strong></div><button class="add-btn" onclick="addItem('19:00-é€±äºŒ')">+ æ–°å¢</button></td><td id="19:00-é€±ä¸‰"><button class="add-btn" onclick="addItem('19:00-é€±ä¸‰')">+ æ–°å¢</button></td><td id="19:00-é€±å››"><button class="add-btn" onclick="addItem('19:00-é€±å››')">+ æ–°å¢</button></td><td id="19:00-é€±äº”"><button class="add-btn" onclick="addItem('19:00-é€±äº”')">+ æ–°å¢</button></td><td id="19:00-é€±å…­"><button class="add-btn" onclick="addItem('19:00-é€±å…­')">+ æ–°å¢</button></td><td id="19:00-é€±æ—¥"><button class="add-btn" onclick="addItem('19:00-é€±æ—¥')">+ æ–°å¢</button></td></tr><tr><td class="time-col">20:00</td><td id="20:00-é€±ä¸€"><div class="boss-item" onclick="removeItem('20:00-é€±ä¸€', 0)"><strong>å¡åµé”</strong></div><div class="boss-item" onclick="removeItem('20:00-é€±ä¸€', 1)"><strong>å±±å›</strong></div><button class="add-btn" onclick="addItem('20:00-é€±ä¸€')">+ æ–°å¢</button></td><td id="20:00-é€±äºŒ"><div class="boss-item" onclick="removeItem('20:00-é€±äºŒ', 0)"><strong>å…‹åƒ¹å¡</strong></div><div class="boss-item" onclick="removeItem('20:00-é€±äºŒ', 1)"><strong>ä¸å¯æ®º</strong></div><button class="add-btn" onclick="addItem('20:00-é€±äºŒ')">+ æ–°å¢</button></td><td id="20:00-é€±ä¸‰"><div class="boss-item" onclick="removeItem('20:00-é€±ä¸‰', 0)"><strong>åº«å±¯</strong></div><div class="boss-item" onclick="removeItem('20:00-é€±ä¸‰', 1)"><strong>ä¸å¯æ®º</strong></div><button class="add-btn" onclick="addItem('20:00-é€±ä¸‰')">+ æ–°å¢</button></td><td id="20:00-é€±å››"><div class="boss-item" onclick="removeItem('20:00-é€±å››', 0)"><strong>ç¾…è£´å‹’</strong></div><div class="boss-item" onclick="removeItem('20:00-é€±å››', 1)"><strong>çƒåœ–é‡Œ</strong></div><button class="add-btn" onclick="addItem('20:00-é€±å››')">+ æ–°å¢</button></td><td id="20:00-é€±äº”"><div class="boss-item" onclick="removeItem('20:00-é€±äº”', 0)"><strong>ç¾…è£´å‹’</strong></div><div class="boss-item" onclick="removeItem('20:00-é€±äº”', 1)"><strong>é‡‘è±¬ç‹</strong></div><button class="add-btn" onclick="addItem('20:00-é€±äº”')">+ æ–°å¢</button></td><td id="20:00-é€±å…­"><button class="add-btn" onclick="addItem('20:00-é€±å…­')">+ æ–°å¢</button></td><td id="20:00-é€±æ—¥"><div class="boss-item" onclick="removeItem('20:00-é€±æ—¥', 0)"><strong>å…‹åƒ¹å¡</strong></div><div class="boss-item" onclick="removeItem('20:00-é€±æ—¥', 1)"><strong>å±±å›</strong></div><button class="add-btn" onclick="addItem('20:00-é€±æ—¥')">+ æ–°å¢</button></td></tr><tr><td class="time-col">20:30</td><td id="20:30-é€±ä¸€"><div class="boss-item" onclick="removeItem('20:30-é€±ä¸€', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('20:30-é€±ä¸€')">+ æ–°å¢</button></td><td id="20:30-é€±äºŒ"><div class="boss-item" onclick="removeItem('20:30-é€±äºŒ', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('20:30-é€±äºŒ')">+ æ–°å¢</button></td><td id="20:30-é€±ä¸‰"><div class="boss-item" onclick="removeItem('20:30-é€±ä¸‰', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('20:30-é€±ä¸‰')">+ æ–°å¢</button></td><td id="20:30-é€±å››"><div class="boss-item" onclick="removeItem('20:30-é€±å››', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('20:30-é€±å››')">+ æ–°å¢</button></td><td id="20:30-é€±äº”"><div class="boss-item" onclick="removeItem('20:30-é€±äº”', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('20:30-é€±äº”')">+ æ–°å¢</button></td><td id="20:30-é€±å…­"><button class="add-btn" onclick="addItem('20:30-é€±å…­')">+ æ–°å¢</button></td><td id="20:30-é€±æ—¥"><div class="boss-item" onclick="removeItem('20:30-é€±æ—¥', 0)"><strong>å¡è«æ–¯</strong></div><button class="add-btn" onclick="addItem('20:30-é€±æ—¥')">+ æ–°å¢</button></td></tr><tr><td class="time-col">23:30</td><td id="23:30-é€±ä¸€"><div class="boss-item" onclick="removeItem('23:30-é€±ä¸€', 0)"><strong>åº«å±¯</strong></div><div class="boss-item" onclick="removeItem('23:30-é€±ä¸€', 1)"><strong>ä¸å¯æ®º</strong></div><button class="add-btn" onclick="addItem('23:30-é€±ä¸€')">+ æ–°å¢</button></td><td id="23:30-é€±äºŒ"><div class="boss-item" onclick="removeItem('23:30-é€±äºŒ', 0)"><strong>å¡åµé”</strong></div><div class="boss-item" onclick="removeItem('23:30-é€±äºŒ', 1)"><strong>çƒåœ–é‡Œ</strong></div><button class="add-btn" onclick="addItem('23:30-é€±äºŒ')">+ æ–°å¢</button></td><td id="23:30-é€±ä¸‰"><div class="boss-item" onclick="removeItem('23:30-é€±ä¸‰', 0)"><strong>å…‹åƒ¹å¡</strong></div><div class="boss-item" onclick="removeItem('23:30-é€±ä¸‰', 1)"><strong>çƒåœ–é‡Œ</strong></div><button class="add-btn" onclick="addItem('23:30-é€±ä¸‰')">+ æ–°å¢</button></td><td id="23:30-é€±å››"><div class="boss-item" onclick="removeItem('23:30-é€±å››', 0)"><strong>åº«å±¯</strong></div><div class="boss-item" onclick="removeItem('23:30-é€±å››', 1)"><strong>é‡‘è±¬ç‹</strong></div><button class="add-btn" onclick="addItem('23:30-é€±å››')">+ æ–°å¢</button></td><td id="23:30-é€±äº”"><div class="boss-item" onclick="removeItem('23:30-é€±äº”', 0)"><strong>å¥§å¹³</strong></div><div class="boss-item" onclick="removeItem('23:30-é€±äº”', 1)"><strong>å±±å›</strong></div><button class="add-btn" onclick="addItem('23:30-é€±äº”')">+ æ–°å¢</button></td><td id="23:30-é€±å…­"><button class="add-btn" onclick="addItem('23:30-é€±å…­')">+ æ–°å¢</button></td><td id="23:30-é€±æ—¥"><div class="boss-item" onclick="removeItem('23:30-é€±æ—¥', 0)"><strong>ç¾…è£´å‹’</strong></div><div class="boss-item" onclick="removeItem('23:30-é€±æ—¥', 1)"><strong>é‡‘è±¬ç‹</strong></div><button class="add-btn" onclick="addItem('23:30-é€±æ—¥')">+ æ–°å¢</button></td></tr></tbody>
</table>

<div class="footer">
    Â© 2026 Black Desert Online Timer | <strong>é…’ç™® Guild</strong> <br>
    All Rights Reserved.
</div>

<script id="main-script">const removeItemDisabled = true;

    let schedule = {"00:15-é€±å…­":["è‚¯æ©ç‰¹/æœ¨æ‹‰å¡"],"00:15-é€±æ—¥":["å¡è«æ–¯"],"02:00-é€±ä¸€":["å…‹åƒ¹å¡","ä¸å¯æ®º"],"02:00-é€±äºŒ":["ç¾…è£´å‹’","çƒåœ–é‡Œ"],"02:00-é€±ä¸‰":["å¥§å¹³","é‡‘è±¬ç‹"],"02:00-é€±å››":["å¡åµé”","é‡‘è±¬ç‹"],"02:00-é€±äº”":["åº«å±¯","å±±å›"],"02:00-é€±å…­":["åº«å±¯","ä¸å¯æ®º"],"02:00-é€±æ—¥":["ç¾…è£´å‹’","å±±å›"],"11:00-é€±ä¸€":["ç¾…è£´å‹’","çƒåœ–é‡Œ"],"11:00-é€±äºŒ":["åº«å±¯","é‡‘è±¬ç‹"],"11:00-é€±ä¸‰":["å…‹åƒ¹å¡","å±±å›"],"11:00-é€±äº”":["å¡åµé”","ä¸å¯æ®º"],"11:00-é€±å…­":["å¡åµé”","çƒåœ–é‡Œ"],"11:00-é€±æ—¥":["åº«å±¯","ä¸å¯æ®º"],"14:00-é€±ä¸€":["å¡è«æ–¯"],"14:00-é€±äºŒ":["å¡è«æ–¯"],"14:00-é€±ä¸‰":["å¡è«æ–¯"],"14:00-é€±å››":["å¡è«æ–¯"],"14:00-é€±äº”":["å¡è«æ–¯"],"14:00-é€±å…­":["å¡è«æ–¯"],"14:00-é€±æ—¥":["å¡è«æ–¯"],"15:00-é€±ä¸€":["å¥§å¹³","é‡‘è±¬ç‹"],"15:00-é€±äºŒ":["ç¾…è£´å‹’","å±±å›"],"15:00-é€±ä¸‰":["å¡åµé”","å±±å›"],"15:00-é€±å››":["ç¾…è£´å‹’","ä¸å¯æ®º"],"15:00-é€±äº”":["å…‹åƒ¹å¡","çƒåœ–é‡Œ"],"15:00-é€±å…­":["å…‹åƒ¹å¡","é‡‘è±¬ç‹"],"15:00-é€±æ—¥":["å¡åµé”","çƒåœ–é‡Œ"],"16:00-é€±å…­":["é»‘æš—å½±å­"],"16:00-é€±æ—¥":["è²çˆ¾"],"19:00-é€±ä¸€":["è‚¯æ©ç‰¹/æœ¨æ‹‰å¡"],"19:00-é€±äºŒ":["è²çˆ¾"],"20:00-é€±ä¸€":["å¡åµé”","å±±å›"],"20:00-é€±äºŒ":["å…‹åƒ¹å¡","ä¸å¯æ®º"],"20:00-é€±ä¸‰":["åº«å±¯","ä¸å¯æ®º"],"20:00-é€±å››":["ç¾…è£´å‹’","çƒåœ–é‡Œ"],"20:00-é€±äº”":["ç¾…è£´å‹’","é‡‘è±¬ç‹"],"20:00-é€±æ—¥":["å…‹åƒ¹å¡","å±±å›"],"20:30-é€±ä¸€":["å¡è«æ–¯"],"20:30-é€±äºŒ":["å¡è«æ–¯"],"20:30-é€±ä¸‰":["å¡è«æ–¯"],"20:30-é€±å››":["å¡è«æ–¯"],"20:30-é€±äº”":["å¡è«æ–¯"],"20:30-é€±æ—¥":["å¡è«æ–¯"],"23:30-é€±ä¸€":["åº«å±¯","ä¸å¯æ®º"],"23:30-é€±äºŒ":["å¡åµé”","çƒåœ–é‡Œ"],"23:30-é€±ä¸‰":["å…‹åƒ¹å¡","çƒåœ–é‡Œ"],"23:30-é€±å››":["åº«å±¯","é‡‘è±¬ç‹"],"23:30-é€±äº”":["å¥§å¹³","å±±å›"],"23:30-é€±æ—¥":["ç¾…è£´å‹’","é‡‘è±¬ç‹"]};
    let guildBoss = {"day":"é€±å…­","time":"21:00"}; 
    let currentNextData = null;

    const dayNames = ["é€±ä¸€", "é€±äºŒ", "é€±ä¸‰", "é€±å››", "é€±äº”", "é€±å…­", "é€±æ—¥"];
    const times = ["00:15", "02:00", "11:00", "14:00", "15:00", "16:00", "19:00", "20:00", "20:30", "23:30"];
    
    // ç‹åç¿»è­¯å­—å…¸
    const bossTranslations = {
        "å…‹åƒ¹å¡": { "en-US": "Kzarka", "ja-JP": "ã‚¯ã‚¶ã‚«", "ko-KR": "í¬ìì¹´" },
        "å¡åµé”": { "en-US": "Karanda", "ja-JP": "ã‚«ãƒ©ãƒ³ãƒ€", "ko-KR": "ì¹´ë€ë‹¤" },
        "åº«å±¯": { "en-US": "Kutum", "ja-JP": "ã‚¯ãƒ„ãƒ ", "ko-KR": "ì¿ íˆ¼" },
        "ç¾…è£´å‹’": { "en-US": "Nouver", "ja-JP": "ãƒŒãƒ¼ãƒ™ãƒ«", "ko-KR": "ëˆ„ë² ë¥´" },
        "å¥§å¹³": { "en-US": "Offin", "ja-JP": "ã‚ªãƒ”ãƒ³", "ko-KR": "ì˜¤í•€" },
        "å¡è«æ–¯": { "en-US": "Garmoth", "ja-JP": "ã‚¬ãƒ¼ãƒ¢ã‚¹", "ko-KR": "ê°€ëª¨ìŠ¤" },
        "è²çˆ¾": { "en-US": "Vell", "ja-JP": "ãƒ™ãƒ«", "ko-KR": "ë²¨" },
        "è‚¯æ©ç‰¹/æœ¨æ‹‰å¡": { "en-US": "Quint and Muraka", "ja-JP": "ã‚¯ã‚£ãƒ³ãƒˆã€ãƒ ãƒ©ã‚«", "ko-KR": "í€¸íŠ¸, ë¬´ë¼ì¹´" },
        "å±±å›": { "en-US": "Sangoon", "ja-JP": "ã‚µãƒ³ã‚°ãƒ³", "ko-KR": "ì‚°êµ°" },
        "é‡‘è±¬ç‹": { "en-US": "Golden Pig King", "ja-JP": "é‡‘è±šç‹", "ko-KR": "ê¸ˆë¼ì§€ì™•" },
        "ä¸å¯æ®º": { "en-US": "Bulgasal", "ja-JP": "ãƒ—ã‚¬ã‚µãƒ«", "ko-KR": "ë¶ˆê°€ì‚´" },
        "çƒåœ–é‡Œ": { "en-US": "Uturi", "ja-JP": "ã‚¦ãƒˆã‚¥ãƒª", "ko-KR": "ìš°íˆ¬ë¦¬" },
        "é»‘æš—å½±å­": { "en-US": "Dark Shadow", "ja-JP": "ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒœã‚¹", "ko-KR": "í•„ë“œ ìš°ë‘ë¨¸ë¦¬" }
    };

    let voiceEnabled = localStorage.getItem('voiceEnabled') === null ? true : localStorage.getItem('voiceEnabled') === 'true';
    let lastAnnounced = "";

    function initVoice() {
        const vol = localStorage.getItem('voiceVolume') || 0.5;
        document.getElementById('volumeRange').value = vol;
        const lang = localStorage.getItem('voiceLang') || 'zh-TW';
        document.getElementById('voiceLangSelect').value = lang;
        updateVoiceBtn();
    }

    function toggleVoice() {
        voiceEnabled = !voiceEnabled;
        localStorage.setItem('voiceEnabled', voiceEnabled);
        updateVoiceBtn();
        if (voiceEnabled) speakPrompt();
    }

    function updateVoiceBtn() {
        const btn = document.getElementById('voiceToggleBtn');
        btn.innerText = voiceEnabled ? "ğŸ”Š èªéŸ³ï¼šé–‹å•Ÿ" : "ğŸ”‡ èªéŸ³ï¼šéœéŸ³";
        btn.style.background = voiceEnabled ? "#27ae60" : "#7f8c8d";
    }

    function saveVolume() { localStorage.setItem('voiceVolume', document.getElementById('volumeRange').value); }
    function saveVoiceLang() { localStorage.setItem('voiceLang', document.getElementById('voiceLangSelect').value); speakPrompt(); }

    function speakPrompt() {
        const lang = document.getElementById('voiceLangSelect').value;
        const prompts = {
            'zh-TW': 'èªéŸ³æé†’å·²é–‹å•Ÿ',
            'en-US': 'Voice alerts enabled',
            'ja-JP': 'éŸ³å£°æ¡ˆå†…ã‚’æœ‰åŠ¹ã«ã—ã¾ã—ãŸ',
            'ko-KR': 'ìŒì„± ì•ˆë‚´ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤'
        };
        speak(prompts[lang]);
    }

    function testCurrentVoice() {
        if (!currentNextData) { alert("ç›®å‰æ²’æœ‰ç‹æ’ç¨‹å¯æ¸¬è©¦ï¼"); return; }
        processAnnounce(currentNextData, 15, true);
    }

    function speak(text) {
        if (!voiceEnabled) return;
        const lang = document.getElementById('voiceLangSelect').value;
        const synth = window.speechSynthesis;
        const utter = new SpeechSynthesisUtterance(text);
        utter.lang = lang;
        utter.volume = document.getElementById('volumeRange').value;
        synth.speak(utter);
    }

    function processAnnounce(bossData, totalMins, isTest = false) {
        const lang = document.getElementById('voiceLangSelect').value;
        
        // ç¿»è­¯é‚è¼¯
        let names = bossData.name.split(',').map(n => n.trim());
        let translatedNames = names.map(n => {
            return (bossTranslations[n] && bossTranslations[n][lang]) ? bossTranslations[n][lang] : n;
        }).join(', ');

        if (bossData.isGuild) {
            translatedNames = (lang === 'zh-TW' ? 'å…¬æœƒç‹' : (lang === 'en-US' ? 'Guild Boss' : (lang === 'ja-JP' ? 'ã‚®ãƒ«ãƒ‰ãƒœã‚¹' : 'ê¸¸ë“œ ë³´ìŠ¤')));
        }
        
        let msg = "";
        if (lang === 'zh-TW') msg = `${translatedNames}ï¼Œé‚„æœ‰ ${totalMins} åˆ†é˜`;
        else if (lang === 'en-US') msg = `${translatedNames}, ${totalMins} minutes remaining`;
        else if (lang === 'ja-JP') msg = `${translatedNames}ã€ã‚ã¨ ${totalMins} åˆ†ã§ã™`;
        else if (lang === 'ko-KR') msg = `${translatedNames}, ${totalMins} ë¶„ ì „ì…ë‹ˆë‹¤`;
        
        speak(isTest ? `(Test) ${msg}` : msg);
    }

    function setGuildBoss() {
        const d = prompt("è«‹è¼¸å…¥é€±å¹¾ (å¦‚: 6):");
        let t = prompt("è«‹è¼¸å…¥æ™‚é–“ (å¦‚: 2100):");
        if (d && t) {
            t = t.trim().replace(/\D/g, '');
            if (t.length === 4) t = t.substring(0, 2) + ":" + t.substring(2, 4);
            else if (t.length === 3) t = "0" + t.substring(0, 1) + ":" + t.substring(1, 3);
            let dayStr = d.includes("é€±") ? d : "é€±" + (d=="7"?"æ—¥": (d=="1"?"ä¸€": (d=="2"?"äºŒ": (d=="3"?"ä¸‰": (d=="4"?"å››": (d=="5"?"äº”": (d=="6"?"å…­":"")))))));
            if(dayNames.includes(dayStr)) {
                guildBoss = { day: dayStr, time: t };
                updateGuildStatus();
            }
        }
    }

    function clearGuildBoss() { guildBoss = { day: null, time: null }; updateGuildStatus(); }
    function updateGuildStatus() { document.getElementById('guild-status').innerText = guildBoss.day ? `${guildBoss.day} ${guildBoss.time}` : "å°šæœªè¨­å®š"; }

    function renderTable() {
        const body = document.getElementById('tableBody');
        body.innerHTML = '';
        times.forEach(time => {
            const tr = document.createElement('tr');
            tr.innerHTML = `<td class="time-col">${time}</td>`;
            dayNames.forEach(day => {
                const key = `${time}-${day}`;
                const td = document.createElement('td');
                td.id = key;
                const items = schedule[key] || [];
                let html = '';
                items.forEach((name, idx) => { html += `<div class="boss-item" onclick="removeItem('${key}', ${idx})"><strong>${name}</strong></div>`; });
                html += `<button class="add-btn" onclick="addItem('${key}')">+ æ–°å¢</button>`;
                td.innerHTML = html;
                tr.appendChild(td);
            });
            body.appendChild(tr);
        });
    }

    function addItem(key) {
        const name = prompt("è¼¸å…¥ç‹åï¼š");
        if (name && name.trim()) {
            if (!schedule[key]) schedule[key] = [];
            schedule[key].push(name.trim());
            renderTable();
        }
    }

    function removeItem(key, index) { 
        if(typeof removeItemDisabled !== 'undefined') return;
        if(confirm("ç¢ºå®šåˆªé™¤ï¼Ÿ")) { schedule[key].splice(index, 1); renderTable(); }
    }

    function updateTick() {
        const now = new Date();
        const curDayIdx = (now.getDay() + 6) % 7; 
        document.getElementById('clock').innerText = now.toLocaleTimeString('zh-TW', {hour12:false});
        document.getElementById('date-display').innerText = now.toLocaleDateString('zh-TW', {weekday:'long', year:'numeric', month:'long', day:'numeric'});

        let worldBossList = [];
        let combinedList = [];

        Object.keys(schedule).forEach(key => {
            if (!schedule[key] || schedule[key].length === 0) return;
            const [t, d] = key.split('-');
            const dIdx = dayNames.indexOf(d);
            const [h, m] = t.split(':');
            let target = new Date();
            target.setHours(parseInt(h), parseInt(m), 0, 0);
            let dDiff = dIdx - curDayIdx;
            if (dDiff < 0 || (dDiff === 0 && target <= now)) dDiff += 7;
            target.setDate(target.getDate() + dDiff);
            const data = { name: schedule[key].join(', '), time: target, key: key, isGuild: false };
            worldBossList.push(data);
            combinedList.push(data);
        });

        if(guildBoss.day && guildBoss.time && guildBoss.time.includes(":")) {
            const dIdx = dayNames.indexOf(guildBoss.day);
            const [h, m] = guildBoss.time.split(':');
            let target = new Date();
            target.setHours(parseInt(h), parseInt(m), 0, 0);
            let dDiff = dIdx - curDayIdx;
            if (dDiff < 0 || (dDiff === 0 && target <= now)) dDiff += 7;
            target.setDate(target.getDate() + dDiff);
            combinedList.push({ name: "ã‚®ãƒ«ãƒ‰ãƒœã‚¹", time: target, key: null, isGuild: true });
        }

        worldBossList.sort((a,b) => a.time - b.time);
        combinedList.sort((a,b) => a.time - b.time);

        if (combinedList.length > 0) {
            const nextAny = combinedList[0];
            currentNextData = nextAny;
            const diff = nextAny.time - now;
            const hh = Math.floor(diff / 3600000).toString().padStart(2,'0');
            const mm = Math.floor((diff % 3600000) / 60000).toString().padStart(2,'0');
            const ss = Math.floor((diff % 60000) / 1000).toString().padStart(2,'0');
            const timerStr = `${hh}:${mm}:${ss}`;
            const bossDisplay = nextAny.isGuild ? "ğŸ›¡ï¸ å…¬æœƒç‹" : nextAny.name;
            document.getElementById('next-boss-info').innerText = `ä¸‹ä¸€å ´é å‘Šï¼š${bossDisplay} (${timerStr})`;
            document.title = `[${timerStr}] ${bossDisplay}`; 

            const totalMins = Math.floor(diff / 60000);
            const announceKey = `${nextAny.name}-${totalMins}`;
            if ((totalMins === 30 || totalMins === 15 || totalMins === 5) && lastAnnounced !== announceKey) {
                processAnnounce(nextAny, totalMins, false);
                lastAnnounced = announceKey;
            }
        }

        document.querySelectorAll('.active-cell').forEach(el => el.classList.remove('active-cell'));
        if (worldBossList.length > 0) {
            const nextWorld = worldBossList[0];
            const activeEl = document.getElementById(nextWorld.key);
            if (activeEl) activeEl.classList.add('active-cell');
        }
    }

    function exportHTML(isReadOnly) {
        const sStr = JSON.stringify(schedule);
        const gStr = JSON.stringify(guildBoss);
        let cloneDoc = document.documentElement.cloneNode(true);
        if (isReadOnly) {
            const style = document.createElement('style');
            style.innerHTML = `.add-btn, #admin-tools, #guild-admin-btns { display: none !important; } .boss-item { cursor: default !important; pointer-events: none !important; }`;
            cloneDoc.querySelector('head').appendChild(style);
            const script = cloneDoc.querySelector('#main-script');
            script.innerHTML = "const removeItemDisabled = true;\n" + script.innerHTML;
        }
        let src = cloneDoc.outerHTML;
        src = src.replace(/let schedule = \{.*?\};/, `let schedule = ${sStr};`);
        src = src.replace(/let guildBoss = \{.*?\};/, `let guildBoss = ${gStr};`);
        const a = document.createElement('a');
        a.href = URL.createObjectURL(new Blob(["<!DOCTYPE html>\n" + src], { type: 'text/html' }));
        a.download = isReadOnly ? 'é…’ç™®è¨ˆæ™‚å™¨_Web.html' : 'é…’ç™®è¨ˆæ™‚å™¨_Admin.html';
        a.click();
    }

    initVoice(); renderTable(); updateGuildStatus(); setInterval(updateTick, 1000);
</script>


</body></html>